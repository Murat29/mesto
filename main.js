!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t),n.d(t,"api",(function(){return U}));var r={formSelector:".popup__form",formEditSelector:".popup__form-edit",formAddSelector:".popup__form-add",formEditAvatarSelector:".popup__form-edit-avatar",inputSelector:".popup__input",submitButtonSelector:".button",inactiveButtonClass:"button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"},o=document.querySelector(".cards__container"),i=document.querySelector("#popup__input_user-name"),a=document.querySelector("#popup__input_user-job"),u=document.querySelector(".popup_type_сonsent").querySelector(".button__sabmit"),s=document.querySelector(".popup_type_add").querySelector(".popup__form"),c=document.querySelector(".popup_type_edit-avatar").querySelector(".popup__form");function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.headers=t.headers,this.url=t.url}var t,n,r;return t=e,(n=[{key:"getUser",value:function(){return fetch("".concat(this.url,"/users/me"),{headers:this.headers}).then(this._getResponseData)}},{key:"editUser",value:function(e){return fetch("".concat(this.url,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:e.name_user,about:e.job_user})}).then(this._getResponseData)}},{key:"getCards",value:function(){return fetch("".concat(this.url,"/cards"),{headers:this.headers}).then(this._getResponseData)}},{key:"createCard",value:function(e){return fetch("".concat(this.url,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._getResponseData)}},{key:"deleteCard",value:function(e){return fetch("".concat(this.url,"/cards/").concat(e),{method:"DELETE",headers:this.headers}).then(this._getResponseData)}},{key:"putLike",value:function(e){return fetch("".concat(this.url,"/cards/likes/").concat(e),{method:"PUT",headers:this.headers}).then(this._getResponseData)}},{key:"deleteLike",value:function(e){return fetch("".concat(this.url,"/cards/likes/").concat(e),{method:"DELETE",headers:this.headers}).then(this._getResponseData)}},{key:"editAvatar",value:function(e){return fetch("".concat(this.url,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:e})}).then(this._getResponseData)}},{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}}])&&l(t.prototype,n),r&&l(t,r),e}();function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(t,n,r,o,i,a,u,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cardSelector=n,this._data=t,this._title=t.name,this._image=t.link,this._like=t.likes.length,this._openImgPopup=r,this._ownerId=t.owner._id,this._myId=i,this._cardId=t._id,this._сonsentPopup=o,this._сonsentSabmitBatton=a,this._apiDeleteCard=u,this._apiLike=s}var t,n,r;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".cards__card").cloneNode(!0)}},{key:"_installLike",value:function(e){this._likeNumber.textContent=e.likes.length,this._checkingLike(e)?this._element.querySelector(".button_type_like").classList.add("button_active"):this._element.querySelector(".button_type_like").classList.remove("button_active")}},{key:"_handleLike",value:function(){var e=this;this._apiLike(this._checkingLike(this._data)).then((function(t){e._data.likes=t.likes,e._installLike(t)}))}},{key:"_checkingLike",value:function(e){var t=this;return this._chekLike=!1,e.likes.forEach((function(e){e._id===t._myId&&(t._chekLike=!0)})),this._chekLike}},{key:"_sabmitDeleteCard",value:function(){var e=this;this._deleteCardWrapper=function(){e._deleteCard()},this._сonsentSabmitBatton.addEventListener("click",this._deleteCardWrapper)}},{key:"_deleteCard",value:function(){var e=this;this._apiDeleteCard(this._cardId).then((function(){e._element.remove(),e._сonsentSabmitBatton.removeEventListener("click",e._deleteCardWrapper)}))}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".cards__image").addEventListener("click",(function(){e._openImgPopup(e._title,e._image)})),this._element.querySelector(".button_type_like").addEventListener("click",(function(){e._handleLike()})),this._myId===this._ownerId&&(this._butttonDelete=this._element.querySelector(".button_type_delete"),this._butttonDelete.addEventListener("click",(function(t){e._сonsentPopup.open(),e._sabmitDeleteCard()})),this._butttonDelete.classList.add("button_visible"))}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._cardImage=this._element.querySelector(".cards__image"),this._element.querySelector(".cards__title").textContent=this._title,this._cardImage.src=this._image,this._cardImage.alt="Изображение места ".concat(this._title),this._likeNumber=this._element.querySelector(".card__like-number"),this._installLike(this._data),this._setEventListeners(),this._element}}])&&p(t.prototype,n),r&&p(t,r),e}();function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=t,this._formElement=document.querySelector(t),this._inputSelector=n.inputSelector,this._submitButtonSelector=n.submitButtonSelector,this._inactiveButtonClass=n.inactiveButtonClass,this._inputErrorClass=n.inputErrorClass,this._errorClass=n.errorClass,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector))}var t,n,r;return t=e,(n=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error"));n.textContent=t,n.classList.add(this._errorClass),e.classList.add(this._inputErrorClass)}},{key:"clearErrors",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));t.textContent="",t.classList.remove(this._errorClass),e.classList.remove(this._inputErrorClass)}},{key:"_checkInputValidity",value:function(e){if(e.validity.valid)this._hideInputError(e);else{var t=e.validationMessage;this._showInputError(e,t)}}},{key:"_toggleButtonState",value:function(){this._checkFormValidity(this._inputList)?this.disabledButton():this.enabledButton()}},{key:"enabledButton",value:function(){this._buttonElement.removeAttribute("disabled"),this._buttonElement.classList.remove(this._inactiveButtonClass)}},{key:"disabledButton",value:function(){this._buttonElement.setAttribute("disabled",!0),this._buttonElement.classList.add(this._inactiveButtonClass)}},{key:"_checkFormValidity",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_setEventListeners",value:function(){var e=this;this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))})),this._toggleButtonState()}},{key:"enableValidation",value:function(){var e=this;this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e.disabledButton()})),this._setEventListeners(this._formElement)}}])&&_(t.prototype,n),r&&_(t,r),e}();function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=t,this._container=n}var t,n,r;return t=e,(n=[{key:"setItemPrepend",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}}])&&y(t.prototype,n),r&&y(t,r),e}();function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._selectorPopup=t,this._popup=document.querySelector(this._selectorPopup),this._handleEscClose=this._handleEscClose.bind(this),this.__handleСrossAndOverlayClose=this._handleСrossAndOverlayClose.bind(this)}var t,n,r;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_is-opened"),this.setEventListeners()}},{key:"close",value:function(){this._popup.removeEventListener("click",this.__handleСrossAndOverlayClose),document.removeEventListener("keyup",this._handleEscClose),this._popup.classList.remove("popup_is-opened")}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_handleСrossAndOverlayClose",value:function(e){(e.target.classList.contains(this._selectorPopup.substr(1))||e.target.classList.contains("button__image"))&&this.close()}},{key:"setEventListeners",value:function(){this._popup.addEventListener("click",this.__handleСrossAndOverlayClose),document.addEventListener("keyup",this._handleEscClose)}}])&&m(t.prototype,n),r&&m(t,r),e}();function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return(S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}function L(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(i,e);var t,n,r,o=C(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e))._popup=document.querySelector(e),t._increaseImg=t._popup.querySelector(".popup__img"),t._captionImg=t._popup.querySelector(".popup__img-caption"),t}return t=i,(n=[{key:"handleCardClick",value:function(e,t){this._captionImg.textContent=e,this._increaseImg.src=t,S(w(i.prototype),"open",this).call(this)}}])&&g(t.prototype,n),r&&g(t,r),i}(b);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t,n){return(I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=B(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B(e);if(t){var o=B(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return D(this,n)}}function D(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(i,e);var t,n,r,o=R(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,e))._popup=document.querySelector(e),n._submitForm=t,n}return t=i,(n=[{key:"close",value:function(){this._popup.querySelector(".popup__form").reset(),this._popup.removeEventListener("submit",this.sabmitHandler),I(B(i.prototype),"close",this).call(this)}},{key:"_getInputValues",value:function(){var e=this;return this._dataNewCard={},this._popup.querySelectorAll(".popup__input").forEach((function(t){e._dataNewCard[t.name]=t.value})),this._dataNewCard}},{key:"setEventListeners",value:function(){var e=this;this.sabmitHandler=function(t){e._submitForm(t,e._getInputValues())},this._popup.addEventListener("submit",this.sabmitHandler),I(B(i.prototype),"setEventListeners",this).call(this)}}])&&P(t.prototype,n),r&&P(t,r),i}(b);function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(t.nameSelector),this._job=document.querySelector(t.jobSelector),this._avatar=document.querySelector(t.avatarSelector)}var t,n,r;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,job:this._job.textContent}}},{key:"setUserInfo",value:function(e){this.userInfo=e,this._name.textContent=this.userInfo.name_user,this._job.textContent=this.userInfo.job_user}},{key:"getUserAvatar",value:function(){return this._avatar.src}},{key:"setUserAvatar",value:function(e){this._avatar.src=e}}])&&x(t.prototype,n),r&&x(t,r),e}(),U=new f({url:"https://mesto.nomoreparties.co/v1/cohort-17",headers:{authorization:"923b3475-66ff-48a8-819e-62accc3d5c64","Content-Type":"application/json"}}),V=new O(".popup_type_img"),N=new v((function(e){var t=new h(e,".card-template",V.handleCardClick.bind(V),K,F,u,M,H).generateCard();N.setItemPrepend(t)}),o);function H(e){return e?U.deleteLike(this._cardId).then((function(e){return e})).catch((function(e){alert(e)})):U.putLike(this._cardId).then((function(e){return e})).catch((function(e){alert(e)}))}function M(e){return U.deleteCard(e).then((function(){K.close()})).catch((function(e){alert(e)}))}U.getCards().then((function(e){var t=e.reverse();N.renderItems(t)})).catch((function(e){alert(e)}));var F,J=new T({nameSelector:".profile__name",jobSelector:".profile__job",avatarSelector:".profile__avatar"});U.getUser().then((function(e){F=e._id;var t={name_user:e.name,job_user:e.about};J.setUserAvatar(e.avatar),J.setUserInfo(t)})).catch((function(e){alert(e)}));var W=new A(".popup_type_edit",(function(e,t){Z(!0,e),U.editUser(t).then((function(e){var t={name_user:e.name,job_user:e.about,avatar_user:e.avatar};J.setUserInfo(t),W.close()})).catch((function(e){alert(e)})).finally((function(){Z(!1,e)}))}));document.querySelector(".button_type_edit").addEventListener("click",(function(){Q.clearErrors(),Q.enabledButton();var e=J.getUserInfo();i.value=e.name,a.value=e.job,W.open()}));var z=new A(".popup_type_add",(function(e,t){Z(!0,e),U.createCard(t).then((function(e){N.renderItems([e]),z.close()})).catch((function(e){alert(e)})).finally((function(){Z(!1,e)}))}));document.querySelector(".button_type_add").addEventListener("click",(function(){s.reset(),X.clearErrors(),X.disabledButton(),z.open()}));var G=new A(".popup_type_edit-avatar",(function(e,t){Z(!0,e),U.editAvatar(t.avatar_user).then((function(e){J.setUserAvatar(e.avatar),G.close()})).catch((function(e){alert(e)})).finally((function(){Z(!1,e)}))}));document.querySelector(".profile__avatar-conteiner").addEventListener("click",(function(){c.reset(),Y.clearErrors(),Y.disabledButton(),G.open()}));var K=new b(".popup_type_сonsent"),Q=new d(r.formEditSelector,r);Q.enableValidation();var X=new d(r.formAddSelector,r);X.enableValidation();var Y=new d(r.formEditAvatarSelector,r);function Z(e,t){var n=t.target.querySelector(".button__sabmit");n.textContent=e?"".concat(n.textContent,"..."):n.textContent.slice(0,-3)}Y.enableValidation()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovLy8uL3NyYy9zY3JpcHRzL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NjcmlwdHMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2NyaXB0cy9wYWdlcy9pbmRleC5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInBhcmFtcyIsImZvcm1TZWxlY3RvciIsImZvcm1FZGl0U2VsZWN0b3IiLCJmb3JtQWRkU2VsZWN0b3IiLCJmb3JtRWRpdEF2YXRhclNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJjYXJkc0NvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInVzZXJOYW1lSW5wdXQiLCJ1c2VySm9iSW5wdXQiLCLRgW9uc2VudFNhYm1pdEJhdHRvbiIsImZvcm1BZGRDYXJkIiwiZm9ybUVkaXRBdmF0YXIiLCJBcGkiLCJjb25maWciLCJ0aGlzIiwiaGVhZGVycyIsInVybCIsImZldGNoIiwidGhlbiIsIl9nZXRSZXNwb25zZURhdGEiLCJkYXRhVXNlciIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibmFtZV91c2VyIiwiYWJvdXQiLCJqb2JfdXNlciIsImRhdGFDYXJkIiwibGluayIsImlkIiwiYXZhdGFyVXJsIiwiYXZhdGFyIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsIkNhcmQiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwib3BlbkltZ1BvcHVwIiwi0YFvbnNlbnRQb3B1cCIsIm15SWQiLCJhcGlEZWxldGVDYXJkIiwiYXBpTGlrZSIsIl9jYXJkU2VsZWN0b3IiLCJfZGF0YSIsIl90aXRsZSIsIl9pbWFnZSIsIl9saWtlIiwibGlrZXMiLCJsZW5ndGgiLCJfb3BlbkltZ1BvcHVwIiwiX293bmVySWQiLCJvd25lciIsIl9pZCIsIl9teUlkIiwiX2NhcmRJZCIsIl/RgW9uc2VudFBvcHVwIiwiX9GBb25zZW50U2FibWl0QmF0dG9uIiwiX2FwaURlbGV0ZUNhcmQiLCJfYXBpTGlrZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfbGlrZU51bWJlciIsInRleHRDb250ZW50IiwiX2NoZWNraW5nTGlrZSIsIl9lbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiX2luc3RhbGxMaWtlIiwiX2NoZWtMaWtlIiwiZm9yRWFjaCIsImVsIiwiX2RlbGV0ZUNhcmRXcmFwcGVyIiwiX2RlbGV0ZUNhcmQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlIiwiX2J1dHR0b25EZWxldGUiLCJldnQiLCJvcGVuIiwiX3NhYm1pdERlbGV0ZUNhcmQiLCJfZ2V0VGVtcGxhdGUiLCJfY2FyZEltYWdlIiwic3JjIiwiYWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiRm9ybVZhbGlkYXRvciIsIl9mb3JtU2VsZWN0b3IiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJfaGlkZUlucHV0RXJyb3IiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfc2hvd0lucHV0RXJyb3IiLCJfY2hlY2tGb3JtVmFsaWRpdHkiLCJkaXNhYmxlZEJ1dHRvbiIsImVuYWJsZWRCdXR0b24iLCJfYnV0dG9uRWxlbWVudCIsInJlbW92ZUF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsImlucHV0TGlzdCIsInNvbWUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwicHJldmVudERlZmF1bHQiLCJTZWN0aW9uIiwicmVuZGVyZXIiLCJjb250YWluZXJTZWxlY3RvciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwicHJlcGVuZCIsIml0ZW0iLCJQb3B1cCIsInNlbGVjdG9yUG9wdXAiLCJfc2VsZWN0b3JQb3B1cCIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsIl9faGFuZGxl0KFyb3NzQW5kT3ZlcmxheUNsb3NlIiwiX2hhbmRsZdChcm9zc0FuZE92ZXJsYXlDbG9zZSIsInNldEV2ZW50TGlzdGVuZXJzIiwiY2xvc2UiLCJ0YXJnZXQiLCJjb250YWlucyIsInN1YnN0ciIsIlBvcHVwV2l0aEltYWdlIiwiX2luY3JlYXNlSW1nIiwiX2NhcHRpb25JbWciLCJ0aXRsZSIsIlBvcHVwV2l0aEZvcm0iLCJzdWJtaXRGb3JtIiwiX3N1Ym1pdEZvcm0iLCJyZXNldCIsInNhYm1pdEhhbmRsZXIiLCJfZGF0YU5ld0NhcmQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJVc2VySW5mbyIsInNlbGVjdG9yVXNlckluZm8iLCJfbmFtZSIsIm5hbWVTZWxlY3RvciIsIl9qb2IiLCJqb2JTZWxlY3RvciIsIl9hdmF0YXIiLCJhdmF0YXJTZWxlY3RvciIsImpvYiIsInVzZXJJbmZvIiwidXNlckF2YXRhclVybCIsImFwaSIsImF1dGhvcml6YXRpb24iLCJpbWdQb3B1cCIsImluc3RhbmNl0KFsYXNzU2VjdGlvbiIsIm5ld0NhcmQiLCJoYW5kbGVDYXJkQ2xpY2siLCJnZW5lcmF0ZUNhcmQiLCJzZXRJdGVtUHJlcGVuZCIsImlzTGlrZSIsImRlbGV0ZUxpa2UiLCJlcnIiLCJhbGVydCIsInB1dExpa2UiLCJjYXJkSWQiLCJkZWxldGVDYXJkIiwiZ2V0Q2FyZHMiLCJyZXN1bHQiLCJpbml0aWFsQ2FyZHNMaXN0IiwicmV2ZXJzZSIsInJlbmRlckl0ZW1zIiwiZ2V0SW5mbyIsImdldFVzZXIiLCJzZXRVc2VyQXZhdGFyIiwic2V0VXNlckluZm8iLCJlZGl0UG9wdXAiLCJyZW5kZXJMb2FkaW5nIiwiZWRpdFVzZXIiLCJhdmF0YXJfdXNlciIsImZvcm1FZGl0VmFsaWRhdG9yIiwiY2xlYXJFcnJvcnMiLCJnZXRVc2VySW5mbyIsImFkZFBvcHVwIiwiZGF0YU5ld0NhcmQiLCJjcmVhdGVDYXJkIiwiZm9ybUFkZFZhbGlkYXRvciIsImVkaXRBdmF0YXJQb3B1cCIsIkRhdGFBdmF0YXIiLCJlZGl0QXZhdGFyIiwiZm9ybUVkaXRBdmF0YXJWYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwiaXNMb2FkaW5nIiwiYnV0dG9uU2FibWl0Iiwic2xpY2UiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIsT0FBT0YsRUFBaUJFLEdBQVVDLFFBR25DLElBQUlDLEVBQVNKLEVBQWlCRSxHQUFZLENBQ3pDRyxFQUFHSCxFQUNISSxHQUFHLEVBQ0hILFFBQVMsSUFVVixPQU5BSSxFQUFRTCxHQUFVTSxLQUFLSixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTRixHQUcvREcsRUFBT0UsR0FBSSxFQUdKRixFQUFPRCxRQUtmRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxFQUFPRSxHQUV2QyxHQURVLEVBQVBBLElBQVVGLEVBQVFyQixFQUFvQnFCLElBQy9CLEVBQVBFLEVBQVUsT0FBT0YsRUFDcEIsR0FBVyxFQUFQRSxHQUE4QixpQkFBVkYsR0FBc0JBLEdBQVNBLEVBQU1HLFdBQVksT0FBT0gsRUFDaEYsSUFBSUksRUFBS1gsT0FBT1ksT0FBTyxNQUd2QixHQUZBMUIsRUFBb0JrQixFQUFFTyxHQUN0QlgsT0FBT0MsZUFBZVUsRUFBSSxVQUFXLENBQUVULFlBQVksRUFBTUss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ckUsRUFBWTJJLFFBQ1ppRCxFQUFpQkwsY0FDakJLLEVBQWlCdEYsaUJBQ2pCbUYsRUFBUy9HLFVBR2IsSUFBTW1ILEVBQWtCLElBQUlyRCxFQUFjLDJCQTREMUMsU0FBcUMvRCxFQUFLcUgsR0FDdENYLEdBQWMsRUFBTTFHLEdBQ3BCaUYsRUFBSXFDLFdBQVdELEVBQVdULGFBQ3JCN0ssTUFBSyxTQUFDc0IsR0FDSGdKLEVBQVFFLGNBQWNsSixFQUFLUixRQUMzQnVLLEVBQWdCN0QsV0FIeEIsT0FLVyxTQUFBb0MsR0FDSEMsTUFBTUQsTUFOZCxTQVFhLFdBQ0xlLEdBQWMsRUFBTzFHLFNBdEVqQzlFLFNBQVNDLGNBQWMsOEJBQThCeUUsaUJBQWlCLFNBQVMsV0FDM0VwRSxFQUFlMEksUUFDZnFELEVBQXdCVCxjQUN4QlMsRUFBd0IxRixpQkFDeEJ1RixFQUFnQm5ILFVBR3BCLElBQU16QyxFQUFlLElBQUl1RixFQUFNLHVCQUl6QjhELEVBQW9CLElBQUlyRyxFQUFjakcsRUFBT0UsaUJBQWtCRixHQUNyRXNNLEVBQWtCVyxtQkFFbEIsSUFBTUwsRUFBbUIsSUFBSTNHLEVBQWNqRyxFQUFPRyxnQkFBaUJILEdBQ25FNE0sRUFBaUJLLG1CQUVqQixJQUFNRCxFQUEwQixJQUFJL0csRUFBY2pHLEVBQU9JLHVCQUF3QkosR0F5RGpGLFNBQVNtTSxFQUFjZSxFQUFXekgsR0FDOUIsSUFBTTBILEVBQWUxSCxFQUFJd0QsT0FBT3JJLGNBQWMsbUJBRTFDdU0sRUFBYTFJLFlBRGJ5SSxFQUNBLFVBQThCQyxFQUFhMUksWUFBM0MsT0FFMkIwSSxFQUFhMUksWUFBWTJJLE1BQU0sR0FBSSxHQTdEdEVKLEVBQXdCQyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiLy/Qv9Cw0YDQsNC80LXRgtGA0Ysg0LTQu9GPINCy0LDQu9C40LTQsNGG0LjQuFxyXG5leHBvcnQgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19mb3JtJyxcclxuICAgIGZvcm1FZGl0U2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0tZWRpdCcsXHJcbiAgICBmb3JtQWRkU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0tYWRkJyxcclxuICAgIGZvcm1FZGl0QXZhdGFyU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0tZWRpdC1hdmF0YXInLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcuYnV0dG9uJyxcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdidXR0b25fZGlzYWJsZWQnLFxyXG4gICAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxyXG4gICAgZXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmUnXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBzZWxlY3RvclVzZXJJbmZvID0ge1xyXG4gICAgbmFtZVNlbGVjdG9yOiAnLnByb2ZpbGVfX25hbWUnLFxyXG4gICAgam9iU2VsZWN0b3I6ICcucHJvZmlsZV9fam9iJyxcclxuICAgIGF2YXRhclNlbGVjdG9yOiAnLnByb2ZpbGVfX2F2YXRhcicsXHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19fY29udGFpbmVyJyk7XHJcbmV4cG9ydCBjb25zdCB1c2VyTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3BvcHVwX19pbnB1dF91c2VyLW5hbWUnKTtcclxuZXhwb3J0IGNvbnN0IHVzZXJKb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwb3B1cF9faW5wdXRfdXNlci1qb2InKTtcclxuZXhwb3J0IGNvbnN0INGBb25zZW50U2FibWl0QmF0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVf0YFvbnNlbnQnKS5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX19zYWJtaXQnKTtcclxuZXhwb3J0IGNvbnN0IGZvcm1BZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfYWRkJykucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbmV4cG9ydCBjb25zdCBmb3JtRWRpdEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2VkaXQtYXZhdGFyJykucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7IiwiZXhwb3J0IGNsYXNzIEFwaSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcclxuICAgICAgICB0aGlzLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycztcclxuICAgICAgICB0aGlzLnVybCA9IGNvbmZpZy51cmw7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlcigpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L3VzZXJzL21lYCwge1xyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnNcclxuICAgICAgICB9KS50aGVuKHRoaXMuX2dldFJlc3BvbnNlRGF0YSlcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZWRpdFVzZXIoZGF0YVVzZXIpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L3VzZXJzL21lYCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWU6IGRhdGFVc2VyLm5hbWVfdXNlciwgYWJvdXQ6IGRhdGFVc2VyLmpvYl91c2VyIH0pXHJcbiAgICAgICAgfSkudGhlbih0aGlzLl9nZXRSZXNwb25zZURhdGEpXHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldENhcmRzKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnVybH0vY2FyZHNgLCB7XHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVyc1xyXG4gICAgICAgIH0pLnRoZW4odGhpcy5fZ2V0UmVzcG9uc2VEYXRhKVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVDYXJkKGRhdGFDYXJkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS9jYXJkc2AsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWU6IGRhdGFDYXJkLm5hbWUsIGxpbms6IGRhdGFDYXJkLmxpbmsgfSlcclxuICAgICAgICB9KS50aGVuKHRoaXMuX2dldFJlc3BvbnNlRGF0YSlcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlQ2FyZChpZCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLnVybH0vY2FyZHMvJHtpZH1gLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgICAgIH0pLnRoZW4odGhpcy5fZ2V0UmVzcG9uc2VEYXRhKVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBwdXRMaWtlKGlkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMudXJsfS9jYXJkcy9saWtlcy8ke2lkfWAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgICAgfSkudGhlbih0aGlzLl9nZXRSZXNwb25zZURhdGEpXHJcblxyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZUxpa2UoaWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L2NhcmRzL2xpa2VzLyR7aWR9YCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgICB9KS50aGVuKHRoaXMuX2dldFJlc3BvbnNlRGF0YSlcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZWRpdEF2YXRhcihhdmF0YXJVcmwpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy51cmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcclxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXI6IGF2YXRhclVybCB9KVxyXG4gICAgICAgIH0pLnRoZW4odGhpcy5fZ2V0UmVzcG9uc2VEYXRhKVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBfZ2V0UmVzcG9uc2VEYXRhKHJlcykge1xyXG4gICAgICAgIGlmICghcmVzLm9rKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSwgY2FyZFNlbGVjdG9yLCBvcGVuSW1nUG9wdXAsINGBb25zZW50UG9wdXAsIG15SWQsINGBb25zZW50U2FibWl0QmF0dG9uLCBhcGlEZWxldGVDYXJkLCBhcGlMaWtlKSB7XHJcbiAgICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMuX3RpdGxlID0gZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlID0gZGF0YS5saW5rO1xyXG4gICAgICAgIHRoaXMuX2xpa2UgPSBkYXRhLmxpa2VzLmxlbmd0aDtcclxuICAgICAgICB0aGlzLl9vcGVuSW1nUG9wdXAgPSBvcGVuSW1nUG9wdXA7XHJcbiAgICAgICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xyXG4gICAgICAgIHRoaXMuX215SWQgPSBteUlkO1xyXG4gICAgICAgIHRoaXMuX2NhcmRJZCA9IGRhdGEuX2lkO1xyXG4gICAgICAgIHRoaXMuX9GBb25zZW50UG9wdXAgPSDRgW9uc2VudFBvcHVwO1xyXG4gICAgICAgIHRoaXMuX9GBb25zZW50U2FibWl0QmF0dG9uID0g0YFvbnNlbnRTYWJtaXRCYXR0b247XHJcbiAgICAgICAgdGhpcy5fYXBpRGVsZXRlQ2FyZCA9IGFwaURlbGV0ZUNhcmQ7XHJcbiAgICAgICAgdGhpcy5fYXBpTGlrZSA9IGFwaUxpa2U7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAgICAgICAuY29udGVudFxyXG4gICAgICAgICAgICAucXVlcnlTZWxlY3RvcignLmNhcmRzX19jYXJkJylcclxuICAgICAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgX2luc3RhbGxMaWtlKGRhdGEpIHtcclxuICAgICAgICB0aGlzLl9saWtlTnVtYmVyLnRleHRDb250ZW50ID0gZGF0YS5saWtlcy5sZW5ndGg7XHJcbiAgICAgICAgaWYgKHRoaXMuX2NoZWNraW5nTGlrZShkYXRhKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25fdHlwZV9saWtlJykuY2xhc3NMaXN0LmFkZCgnYnV0dG9uX2FjdGl2ZScpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbl90eXBlX2xpa2UnKS5jbGFzc0xpc3QucmVtb3ZlKCdidXR0b25fYWN0aXZlJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlTGlrZSgpIHtcclxuICAgICAgICB0aGlzLl9hcGlMaWtlKHRoaXMuX2NoZWNraW5nTGlrZSh0aGlzLl9kYXRhKSlcclxuICAgICAgICAgICAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9kYXRhLmxpa2VzID0gZGF0YS5saWtlcztcclxuICAgICAgICAgICAgICAgIHRoaXMuX2luc3RhbGxMaWtlKGRhdGEpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBfY2hlY2tpbmdMaWtlKGRhdGEpIHtcclxuICAgICAgICB0aGlzLl9jaGVrTGlrZSA9IGZhbHNlO1xyXG4gICAgICAgIGRhdGEubGlrZXMuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlbC5faWQgPT09IHRoaXMuX215SWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWtMaWtlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWtMaWtlO1xyXG4gICAgfVxyXG5cclxuICAgIF9zYWJtaXREZWxldGVDYXJkKCkge1xyXG5cclxuICAgICAgICB0aGlzLl9kZWxldGVDYXJkV3JhcHBlciA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZGVsZXRlQ2FyZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5f0YFvbnNlbnRTYWJtaXRCYXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9kZWxldGVDYXJkV3JhcHBlcik7XHJcblxyXG5cclxuXHJcbiAgICB9XHJcblxyXG4gICAgX2RlbGV0ZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fYXBpRGVsZXRlQ2FyZCh0aGlzLl9jYXJkSWQpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl/RgW9uc2VudFNhYm1pdEJhdHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2RlbGV0ZUNhcmRXcmFwcGVyKTtcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICB9XHJcblxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRzX19pbWFnZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9vcGVuSW1nUG9wdXAodGhpcy5fdGl0bGUsIHRoaXMuX2ltYWdlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX3R5cGVfbGlrZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVMaWtlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9teUlkID09PSB0aGlzLl9vd25lcklkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1dHR0b25EZWxldGUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25fdHlwZV9kZWxldGUnKTtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dHRvbkRlbGV0ZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX9GBb25zZW50UG9wdXAub3BlbigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2FibWl0RGVsZXRlQ2FyZCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5fYnV0dHRvbkRlbGV0ZS5jbGFzc0xpc3QuYWRkKCdidXR0b25fdmlzaWJsZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHNfX2ltYWdlJyk7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHNfX3RpdGxlJykudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcclxuICAgICAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5faW1hZ2U7XHJcbiAgICAgICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IGDQmNC30L7QsdGA0LDQttC10L3QuNC1INC80LXRgdGC0LAgJHt0aGlzLl90aXRsZX1gO1xyXG4gICAgICAgIHRoaXMuX2xpa2VOdW1iZXIgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLW51bWJlcicpO1xyXG4gICAgICAgIHRoaXMuX2luc3RhbGxMaWtlKHRoaXMuX2RhdGEpO1xyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gICAgY29uc3RydWN0b3IoZm9ybVNlbGVjdG9yLCBwYXJhbXMpIHtcclxuICAgICAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBmb3JtU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvcm1TZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHBhcmFtcy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gcGFyYW1zLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBwYXJhbXMuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgICAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBwYXJhbXMuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBwYXJhbXMuZXJyb3JDbGFzcztcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpO1xyXG4gICAgfVxyXG5cclxuICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgY2xlYXJFcnJvcnMoKSB7XHJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICB9XHJcblxyXG4gICAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBpc0lucHV0Tm90VmFsaWQgPSAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG5cclxuICAgICAgICBpZiAoaXNJbnB1dE5vdFZhbGlkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2NoZWNrRm9ybVZhbGlkaXR5KHRoaXMuX2lucHV0TGlzdCkpIHtcclxuICAgICAgICAgICAgdGhpcy5kaXNhYmxlZEJ1dHRvbigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlZEJ1dHRvbigpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGVuYWJsZWRCdXR0b24oKSB7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc2FibGVkQnV0dG9uKCkge1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tGb3JtVmFsaWRpdHkoaW5wdXRMaXN0KSB7XHJcbiAgICAgICAgcmV0dXJuIGlucHV0TGlzdC5zb21lKGlucHV0RWxlbWVudCA9PiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcclxuICAgIH1cclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcblxyXG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZWRCdXR0b24oKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnModGhpcy5fZm9ybUVsZW1lbnQpO1xyXG5cclxuICAgIH1cclxufSIsIi8v0LrQu9Cw0YHRgSwg0LrQvtGC0L7RgNGL0Lkg0LTQvtCx0LDQstC70Y/QtdGCINGA0LDQt9C80LXRgtC60YMg0L3QsCDRgdGC0YDQsNC90LjRhtGDXHJcbmV4cG9ydCBjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHJlbmRlcmVyLCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyU2VsZWN0b3I7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHNldEl0ZW1QcmVwZW5kKGVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICAgIH1cclxuXHJcbiAgICByZW5kZXJJdGVtcyhkYXRhKSB7XHJcblxyXG4gICAgICAgIGRhdGEuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9yUG9wdXApIHtcclxuICAgICAgICB0aGlzLl9zZWxlY3RvclBvcHVwID0gc2VsZWN0b3JQb3B1cFxyXG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvclBvcHVwKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5fX2hhbmRsZdChcm9zc0FuZE92ZXJsYXlDbG9zZSA9IHRoaXMuX2hhbmRsZdChcm9zc0FuZE92ZXJsYXlDbG9zZS5iaW5kKHRoaXMpXHJcbiAgICB9XHJcbiAgICBvcGVuKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX2lzLW9wZW5lZCcpO1xyXG4gICAgICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fX2hhbmRsZdChcm9zc0FuZE92ZXJsYXlDbG9zZSk7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfaXMtb3BlbmVkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2hhbmRsZdChcm9zc0FuZE92ZXJsYXlDbG9zZShldnQpIHtcclxuICAgICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnModGhpcy5fc2VsZWN0b3JQb3B1cC5zdWJzdHIoMSkpIHx8IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdidXR0b25fX2ltYWdlJykpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5fX2hhbmRsZdChcm9zc0FuZE92ZXJsYXlDbG9zZSk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3RvcihjYXJkU2VsZWN0b3IpIHtcclxuICAgICAgICBzdXBlcihjYXJkU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjYXJkU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2luY3JlYXNlSW1nID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWcnKTtcclxuICAgICAgICB0aGlzLl9jYXB0aW9uSW1nID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWctY2FwdGlvbicpO1xyXG4gICAgfVxyXG4gICAgaGFuZGxlQ2FyZENsaWNrKHRpdGxlLCBsaW5rKSB7XHJcbiAgICAgICAgdGhpcy5fY2FwdGlvbkltZy50ZXh0Q29udGVudCA9IHRpdGxlO1xyXG4gICAgICAgIHRoaXMuX2luY3JlYXNlSW1nLnNyYyA9IGxpbms7XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IoY2FyZFNlbGVjdG9yLCBzdWJtaXRGb3JtKSB7XHJcbiAgICAgICAgc3VwZXIoY2FyZFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2FyZFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9zdWJtaXRGb3JtID0gc3VibWl0Rm9ybTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKS5yZXNldCgpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgdGhpcy5zYWJtaXRIYW5kbGVyKTtcclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgdGhpcy5fZGF0YU5ld0NhcmQgPSB7fTtcclxuICAgICAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0JykuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9kYXRhTmV3Q2FyZFtpdGVtLm5hbWVdID0gaXRlbS52YWx1ZTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRhTmV3Q2FyZDtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLnNhYm1pdEhhbmRsZXIgPSAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEZvcm0oZXZ0LCB0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLnNhYm1pdEhhbmRsZXIpO1xyXG5cclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKHNlbGVjdG9yVXNlckluZm8pIHtcclxuICAgICAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvclVzZXJJbmZvLm5hbWVTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fam9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvclVzZXJJbmZvLmpvYlNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yVXNlckluZm8uYXZhdGFyU2VsZWN0b3IpO1xyXG5cclxuICAgIH1cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIGNvbnN0IHVzZXJJbmZvID0ge1xyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICBqb2I6IHRoaXMuX2pvYi50ZXh0Q29udGVudCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiB1c2VySW5mbztcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW5mbyh1c2VySW5mbykge1xyXG4gICAgICAgIHRoaXMudXNlckluZm8gPSB1c2VySW5mbztcclxuICAgICAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gdGhpcy51c2VySW5mby5uYW1lX3VzZXI7XHJcbiAgICAgICAgdGhpcy5fam9iLnRleHRDb250ZW50ID0gdGhpcy51c2VySW5mby5qb2JfdXNlcjtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZ2V0VXNlckF2YXRhcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYXZhdGFyLnNyYztcclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VyQXZhdGFyKHVzZXJBdmF0YXJVcmwpIHtcclxuICAgICAgICB0aGlzLl9hdmF0YXIuc3JjID0gdXNlckF2YXRhclVybDtcclxuICAgIH1cclxuXHJcblxyXG59IiwiaW1wb3J0ICcuLi8uLi9wYWdlcy9pbmRleC5jc3MnXHJcbmltcG9ydCB7XHJcbiAgICBwYXJhbXMsXHJcbiAgICBzZWxlY3RvclVzZXJJbmZvLFxyXG4gICAgY2FyZHNDb250YWluZXIsXHJcbiAgICB1c2VyTmFtZUlucHV0LFxyXG4gICAgdXNlckpvYklucHV0LFxyXG4gICAg0YFvbnNlbnRTYWJtaXRCYXR0b24sXHJcbiAgICBmb3JtQWRkQ2FyZCxcclxuICAgIGZvcm1FZGl0QXZhdGFyLFxyXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcbmltcG9ydCB7IEFwaSB9IGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcclxuaW1wb3J0IHsgQ2FyZCB9IGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xyXG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcclxuaW1wb3J0IHsgUG9wdXBXaXRoSW1hZ2UgfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcclxuaW1wb3J0IHsgUG9wdXBXaXRoRm9ybSB9IGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XHJcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XHJcbmltcG9ydCB7IFBvcHVwIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cCc7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICAgIHVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMTcnLFxyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICAgIGF1dGhvcml6YXRpb246ICc5MjNiMzQ3NS02NmZmLTQ4YTgtODE5ZS02MmFjY2MzZDVjNjQnLFxyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgIH1cclxufSlcclxuXHJcbmV4cG9ydCB7IGFwaSB9XHJcbmNvbnN0IGltZ1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXBfdHlwZV9pbWcnKTtcclxuXHJcblxyXG5jb25zdCBpbnN0YW5jZdChbGFzc1NlY3Rpb24gPSBuZXcgU2VjdGlvbihyZW5kZXJlciwgY2FyZHNDb250YWluZXIpO1xyXG5cclxuLy/RhNGD0L3QutGG0LjRjyDQtNC70Y8g0LrQu9Cw0YHRgdCwIFNlY3Rpb25cclxuZnVuY3Rpb24gcmVuZGVyZXIoaXRlbSkge1xyXG4gICAgY29uc3QgaW5zdGFuY2XQoWxhc3PQoWFyZCA9IG5ldyBDYXJkKGl0ZW0sICcuY2FyZC10ZW1wbGF0ZScsIGltZ1BvcHVwLmhhbmRsZUNhcmRDbGljay5iaW5kKGltZ1BvcHVwKSwg0YFvbnNlbnRQb3B1cCwgbXlJZCwg0YFvbnNlbnRTYWJtaXRCYXR0b24sIGFwaURlbGV0ZUNhcmQsIGFwaUxpa2UpO1xyXG4gICAgY29uc3QgbmV3Q2FyZCA9IGluc3RhbmNl0KFsYXNz0KFhcmQuZ2VuZXJhdGVDYXJkKClcclxuICAgIGluc3RhbmNl0KFsYXNzU2VjdGlvbi5zZXRJdGVtUHJlcGVuZChuZXdDYXJkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYXBpTGlrZShpc0xpa2UpIHtcclxuICAgIGlmIChpc0xpa2UpIHtcclxuICAgICAgICByZXR1cm4gYXBpLmRlbGV0ZUxpa2UodGhpcy5fY2FyZElkKVxyXG4gICAgICAgICAgICAudGhlbihkYXRhID0+IGRhdGEpXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoZXJyKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gYXBpLnB1dExpa2UodGhpcy5fY2FyZElkKVxyXG4gICAgICAgICAgICAudGhlbihkYXRhID0+IGRhdGEpXHJcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoZXJyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFwaURlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gYXBpLmRlbGV0ZUNhcmQoY2FyZElkKVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAg0YFvbnNlbnRQb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgIGFsZXJ0KGVycik7XHJcbiAgICAgICAgfSk7XHJcbn1cclxuXHJcbi8v0YDQtdC90LTQtdGAINC90LDRh9Cw0LvRjNC90YvRhSDQutCw0YDRgtC+0YfQtdC6XHJcbmFwaS5nZXRDYXJkcygpXHJcbiAgICAudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgIGNvbnN0IGluaXRpYWxDYXJkc0xpc3QgPSByZXN1bHQucmV2ZXJzZSgpO1xyXG4gICAgICAgIGluc3RhbmNl0KFsYXNzU2VjdGlvbi5yZW5kZXJJdGVtcyhpbml0aWFsQ2FyZHNMaXN0KTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICBhbGVydChlcnIpO1xyXG4gICAgfSk7XHJcblxyXG5jb25zdCBnZXRJbmZvID0gbmV3IFVzZXJJbmZvKHNlbGVjdG9yVXNlckluZm8pO1xyXG5cclxubGV0IG15SWQ7XHJcblxyXG4vL9C/0LXRgNCy0L7QvdC+0YfQsNC70YzQvdCw0Y8g0L7RgtGA0LjRgdC+0LLQutCwINC00LDQvdC90YvRhSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y9cclxuYXBpLmdldFVzZXIoKVxyXG4gICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgIG15SWQgPSByZXN1bHQuX2lkO1xyXG4gICAgICAgIGNvbnN0IHVzZXJJbmZvID0ge1xyXG4gICAgICAgICAgICBuYW1lX3VzZXI6IHJlc3VsdC5uYW1lLFxyXG4gICAgICAgICAgICBqb2JfdXNlcjogcmVzdWx0LmFib3V0LFxyXG4gICAgICAgIH1cclxuICAgICAgICBnZXRJbmZvLnNldFVzZXJBdmF0YXIocmVzdWx0LmF2YXRhcik7XHJcbiAgICAgICAgZ2V0SW5mby5zZXRVc2VySW5mbyh1c2VySW5mbyk7XHJcblxyXG4gICAgfSlcclxuICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgIGFsZXJ0KGVycik7XHJcbiAgICB9KTtcclxuXHJcbmNvbnN0IGVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9lZGl0JywgZm9ybVN1Ym1pdEhhbmRsZXJFZGl0KTtcclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ1dHRvbl90eXBlX2VkaXQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIGZvcm1FZGl0VmFsaWRhdG9yLmNsZWFyRXJyb3JzKCk7XHJcbiAgICBmb3JtRWRpdFZhbGlkYXRvci5lbmFibGVkQnV0dG9uKCk7XHJcbiAgICBjb25zdCBkYXRhVXNlciA9IGdldEluZm8uZ2V0VXNlckluZm8oKTtcclxuICAgIHVzZXJOYW1lSW5wdXQudmFsdWUgPSBkYXRhVXNlci5uYW1lO1xyXG4gICAgdXNlckpvYklucHV0LnZhbHVlID0gZGF0YVVzZXIuam9iO1xyXG4gICAgZWRpdFBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5jb25zdCBhZGRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9hZGQnLCBmb3JtU3VibWl0SGFuZGxlckFkZCk7XHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5idXR0b25fdHlwZV9hZGQnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIGZvcm1BZGRDYXJkLnJlc2V0KCk7XHJcbiAgICBmb3JtQWRkVmFsaWRhdG9yLmNsZWFyRXJyb3JzKClcclxuICAgIGZvcm1BZGRWYWxpZGF0b3IuZGlzYWJsZWRCdXR0b24oKVxyXG4gICAgYWRkUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbmNvbnN0IGVkaXRBdmF0YXJQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9lZGl0LWF2YXRhcicsIGZvcm1TdWJtaXRIYW5kbGVyRWRpdEF2YXRhcik7XHJcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXItY29udGVpbmVyJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICBmb3JtRWRpdEF2YXRhci5yZXNldCgpO1xyXG4gICAgZm9ybUVkaXRBdmF0YXJWYWxpZGF0b3IuY2xlYXJFcnJvcnMoKVxyXG4gICAgZm9ybUVkaXRBdmF0YXJWYWxpZGF0b3IuZGlzYWJsZWRCdXR0b24oKVxyXG4gICAgZWRpdEF2YXRhclBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5jb25zdCDRgW9uc2VudFBvcHVwID0gbmV3IFBvcHVwKCcucG9wdXBfdHlwZV/RgW9uc2VudCcpO1xyXG5cclxuXHJcbi8v0LLQsNC70LjQtNCw0YbQuNGPINGE0L7RgNC8XHJcbmNvbnN0IGZvcm1FZGl0VmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IocGFyYW1zLmZvcm1FZGl0U2VsZWN0b3IsIHBhcmFtcyk7XHJcbmZvcm1FZGl0VmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGZvcm1BZGRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihwYXJhbXMuZm9ybUFkZFNlbGVjdG9yLCBwYXJhbXMpO1xyXG5mb3JtQWRkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGZvcm1FZGl0QXZhdGFyVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IocGFyYW1zLmZvcm1FZGl0QXZhdGFyU2VsZWN0b3IsIHBhcmFtcyk7XHJcbmZvcm1FZGl0QXZhdGFyVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcblxyXG4vL9GB0LDQsdC80LjRgtGLXHJcbmZ1bmN0aW9uIGZvcm1TdWJtaXRIYW5kbGVyRWRpdChldnQsIGRhdGFVc2VyKSB7XHJcbiAgICByZW5kZXJMb2FkaW5nKHRydWUsIGV2dClcclxuICAgIGFwaS5lZGl0VXNlcihkYXRhVXNlcilcclxuICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhVXNlciA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWVfdXNlcjogcmVzdWx0Lm5hbWUsXHJcbiAgICAgICAgICAgICAgICBqb2JfdXNlcjogcmVzdWx0LmFib3V0LFxyXG4gICAgICAgICAgICAgICAgYXZhdGFyX3VzZXI6IHJlc3VsdC5hdmF0YXIsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZ2V0SW5mby5zZXRVc2VySW5mbyhkYXRhVXNlcik7XHJcbiAgICAgICAgICAgIGVkaXRQb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgIGFsZXJ0KGVycik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlbmRlckxvYWRpbmcoZmFsc2UsIGV2dClcclxuICAgICAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybVN1Ym1pdEhhbmRsZXJBZGQoZXZ0LCBkYXRhTmV3Q2FyZCkge1xyXG4gICAgcmVuZGVyTG9hZGluZyh0cnVlLCBldnQpXHJcbiAgICBhcGkuY3JlYXRlQ2FyZChkYXRhTmV3Q2FyZClcclxuICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG5cclxuICAgICAgICAgICAgaW5zdGFuY2XQoWxhc3NTZWN0aW9uLnJlbmRlckl0ZW1zKFtkYXRhXSk7XHJcbiAgICAgICAgICAgIGFkZFBvcHVwLmNsb3NlKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goZXJyID0+IHtcclxuICAgICAgICAgICAgYWxlcnQoZXJyKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgcmVuZGVyTG9hZGluZyhmYWxzZSwgZXZ0KVxyXG4gICAgICAgIH0pO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gZm9ybVN1Ym1pdEhhbmRsZXJFZGl0QXZhdGFyKGV2dCwgRGF0YUF2YXRhcikge1xyXG4gICAgcmVuZGVyTG9hZGluZyh0cnVlLCBldnQpXHJcbiAgICBhcGkuZWRpdEF2YXRhcihEYXRhQXZhdGFyLmF2YXRhcl91c2VyKVxyXG4gICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIGdldEluZm8uc2V0VXNlckF2YXRhcihkYXRhLmF2YXRhcik7XHJcbiAgICAgICAgICAgIGVkaXRBdmF0YXJQb3B1cC5jbG9zZSgpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiB7XHJcbiAgICAgICAgICAgIGFsZXJ0KGVycik7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlbmRlckxvYWRpbmcoZmFsc2UsIGV2dClcclxuICAgICAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcsIGV2dCkge1xyXG4gICAgY29uc3QgYnV0dG9uU2FibWl0ID0gZXZ0LnRhcmdldC5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX19zYWJtaXQnKVxyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICAgIGJ1dHRvblNhYm1pdC50ZXh0Q29udGVudCA9IGAke2J1dHRvblNhYm1pdC50ZXh0Q29udGVudH0uLi5gXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGJ1dHRvblNhYm1pdC50ZXh0Q29udGVudCA9IGJ1dHRvblNhYm1pdC50ZXh0Q29udGVudC5zbGljZSgwLCAtMyk7XHJcblxyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==